========
Overview
========

---------
About KPP
---------
	 
The `KPP (The Kinetic PreProcessor)
<https://people.cs.vt.edu/asandu/Software/KPP/>`__
translates a chemical mechanism specification from plain-text format
to source code. You may select the numerical integrator to be used
(e.g. Runge-Kutta, LSODES, Rosenbrock, etc.) and the language for the
generated source code (e.g. Fortran-90, Fortran-77, C, Matlab).
The resulting source code files may then be integrated into an atmospheric
chemistry model, chemical box model, or other application.

The most recent public KPP version is 2.2.3_01, which may be
obtained as a tarball from the `KPP web site
<https://people.cs.vt.edu/asandu/Software/KPP/>`__.

The GEOS-Chem Support Team has created a `Github
repository <https://github.com/geoschem/KPP>`__ that contains KPP
version 2.2.3_01 in the ``main`` branch.

-----------------------
About KPP-for-GEOS-Chem
-----------------------
   
**KPP-for-GEOS-Chem** `a clean implementation of KPP
<https://github.com/geoschem/kpp/tree/GC_updates>`__ that has
been customized for GEOS-Chem v11-01 and later versions. You can use
KPP-for-GEOS-Chem to modify existing GEOS-Chem chemistry mechanisms or create new
GEOS-Chem chemistry mechanisms.

KPP-for-GEOS-Chem is kept in the
``GC_updates`` branch of the  `KPP repository on Github <https://github.com/geoschem/KPP>`__.

KPP-for-GEOS-Chem supports a single chemical mechanism (named
`fullchem
<https://github.com/geoschem/geos-chem/blob/main/KPP/fullchem/fullchem.eqn>`__)
that is used by default in GEOS-Chem simulations. Custom mechanisms
may also be created with KPP-for-GEOS-Chem.

The GEOS-Chem source code module ``flexchem_mod.F90`` serves as the connection
between the chemical mechanism solver files generated by KPPGEOS-Chem and
the species concentration array in GEOS-Chem.  In
``flexchem_mod.F90``, species concentrations, photoylsis rates,
meteorology fields, and other relevant information are passed to the
chemistry mechanism routines created by KPP-for-GEOS-Chem.  These
routines compute reaction rates, perform the forward integration, and pass the
updated species concentration back to GEOS-Chem.

The main benefits of KPP-for-GEOS-Chem are:

#. Better documentation of chemical mechanisms;
#. Easy switching between chemical mechanisms.
#. Optimized chemistry computations; and
#. Removal of the SMVGEAR solver from GEOS-Chem (in v11-01 and later versions)
